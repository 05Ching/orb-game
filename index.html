<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>American Racer ‚Äî JS Arcade</title>
  <style>
    :root{
      --road:#2b2b2b; --line:#f5d142; --player:#2ecc71; --enemy:#e74c3c; --fuel:#3498db;
      --ink:#fff; --muted:#aaa;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{display:grid;place-items:center;height:100vh;background:#111;font:600 15px/1.5 ui-sans-serif,system-ui;color:var(--ink)}
    .wrap{width:min(420px,96vw);padding:12px;border-radius:16px;background:#000;box-shadow:0 20px 60px rgba(0,0,0,.6);}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
    h1{font-size:18px}
    .btn{border:0;padding:8px 12px;border-radius:8px;font-weight:700;cursor:pointer}
    .btn.start{background:#27ae60;color:#fff}
    .btn.pause{background:#f39c12;color:#000}
    canvas{display:block;width:100%;height:auto;border-radius:12px;background:var(--road)}
    .hud{display:flex;justify-content:space-between;margin-top:6px;font-size:14px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üèé American Racer</h1>
      <div>
        <button id="btnStart" class="btn start">Start</button>
        <button id="btnPause" class="btn pause">Pause</button>
      </div>
    </header>
    <canvas id="game" width="360" height="540"></canvas>
    <div class="hud">
      <div>Score: <span id="score">0</span></div>
      <div>Lives: <span id="lives">3</span></div>
      <div>Speed: <span id="speed">1x</span></div>
    </div>
  </div>
<script>
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');
const scoreEl=document.getElementById('score');
const livesEl=document.getElementById('lives');
const speedEl=document.getElementById('speed');
const btnStart=document.getElementById('btnStart');
const btnPause=document.getElementById('btnPause');

const S={running:false,score:0,lives:3,speed:1,player:{x:160,y:440,w:40,h:70},enemies:[],fuels:[],time:0};

// controls
const keys=new Set();
addEventListener('keydown',e=>{keys.add(e.key.toLowerCase()); if(e.key===' '){boost();}});
addEventListener('keyup',e=>keys.delete(e.key.toLowerCase()));
canvas.addEventListener('pointermove',e=>{const r=canvas.getBoundingClientRect(); S.player.x=(e.clientX-r.left)-S.player.w/2;});
canvas.addEventListener('pointerdown',()=>boost());
btnStart.onclick=()=>start(true);
btnPause.onclick=()=>toggle();

function start(reset){if(reset){S.score=0;S.lives=3;S.speed=1;S.enemies=[];S.fuels=[];} S.running=true;}
function toggle(){S.running=!S.running;}
function boost(){if(!S.running)return;S.speed=2;setTimeout(()=>S.speed=1,1500);}

function spawn(){if(Math.random()<0.04){ // enemy car
  const lane=[60,140,220,300][Math.floor(Math.random()*4)];
  S.enemies.push({x:lane,y:-80,w:40,h:70});
}
if(Math.random()<0.01){ // fuel
  const lane=[60,140,220,300][Math.floor(Math.random()*4)];
  S.fuels.push({x:lane,y:-40,w:30,h:30});
}}

function rect(x,y,w,h,c){ctx.fillStyle=c;ctx.fillRect(x,y,w,h);}
function drawRoad(){ctx.fillStyle=getComputedStyle(document.documentElement).getPropertyValue('--road');ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue('--line');ctx.lineWidth=6;ctx.setLineDash([30,30]);ctx.beginPath();ctx.moveTo(canvas.width/2,0);ctx.lineTo(canvas.width/2,canvas.height);ctx.stroke();ctx.setLineDash([]);}

function loop(){ctx.clearRect(0,0,canvas.width,canvas.height);drawRoad();
  if(S.running){S.time+=0.016*S.speed;spawn();
    // move player
    if(keys.has('arrowleft')||keys.has('a'))S.player.x-=6*S.speed;
    if(keys.has('arrowright')||keys.has('d'))S.player.x+=6*S.speed;
    S.player.x=Math.max(20,Math.min(canvas.width-60,S.player.x));

    // move enemies
    for(const e of S.enemies)e.y+=4*S.speed*3;
    for(const f of S.fuels)f.y+=4*S.speed*3;

    // collisions
    for(let i=S.enemies.length-1;i>=0;i--){const e=S.enemies[i];if(hit(S.player,e)){S.enemies.splice(i,1);S.lives--;if(S.lives<=0)S.running=false;}}
    for(let i=S.fuels.length-1;i>=0;i--){const f=S.fuels[i];if(hit(S.player,f)){S.fuels.splice(i,1);S.score+=10;}}

    // remove offscreen
    S.enemies=S.enemies.filter(e=>e.y<canvas.height+100);
    S.fuels=S.fuels.filter(f=>f.y<canvas.height+100);

    S.score+=1*S.speed;
  }
  // draw fuels
  for(const f of S.fuels)rect(f.x,f.y,f.w,f.h,getComputedStyle(document.documentElement).getPropertyValue('--fuel'));
  // draw enemies
  for(const e of S.enemies)rect(e.x,e.y,e.w,e.h,getComputedStyle(document.documentElement).getPropertyValue('--enemy'));
  // draw player
  rect(S.player.x,S.player.y,S.player.w,S.player.h,getComputedStyle(document.documentElement).getPropertyValue('--player'));

  scoreEl.textContent=S.score; livesEl.textContent=S.lives; speedEl.textContent=S.speed+"x";
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

function hit(a,b){return a.x<a.x+a.w && a.x+b.w>a.x && a.x<a.x+a.w && a.y+b.h>a.y && a.x<a.x+a.w && a.y<a.y+a.h && a.x+b.w>a.x && a.y<a.y+a.h && a.x<b.x+b.w && a.y<a.y+a.h && a.y+b.h>a.y && a.x+a.w>b.x && a.y+a.h>b.y && a.x<b.x+b.w && a.y<b.y+b.h;}
</script>
</body>
</html>
